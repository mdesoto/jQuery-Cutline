jQuery.fn.extend({cutline:function(k){var c=$.extend({speedOver:"fast",speedOut:"normal",hideDelay:2500,animation:"slide",prefix:"",className:"cutline"},k);$(this).each(function(){var g=this;$(this).load(function(){$this=g;if(this.hasInit)return false;this.hasInit=true;var h=false,b=$("#"+$(this).attr("rel")),d=!b.length?$(this).attr("title"):b.html();d=!d.length?$(this).attr("alt"):d;b.remove();var a=(this.parent&&this.parent.tagName=="a"?this.parent:$(this)).wrap("<div></div>").parent();a.css({overflow:"hidden",
padding:0,fontSize:0.1});a.addClass("cutline-wrapper");a.width($(this).width());a.height($(this).height());$.map(["top","right","bottom","left"],function(f){$.map(["style","width","color"],function(i){i="border-"+f+"-"+i;a.css(i,$(g).css(i))})});$(g).css({border:"0 none"});$.map(["top","right","bottom","left"],function(f){f="margin-"+f;a.css(f,$(g).css(f))});var e=$("div:last",a.append("<div></div>")).addClass(c.className);b=$("div:last",a.append("<div></div>")).addClass(c.className).append(c.prefix).append(d);
$("*",a).css({margin:0}).show();d=jQuery.browser.msie?"static":"relative";e.css({zIndex:1,position:d});b.css({position:d,zIndex:2,background:"none",border:"0 none",opacity:1});e.width(b.outerWidth());e.height(b.outerHeight());b.css({marginTop:-e.outerHeight()});var j=function(){!h&&!imageHover&&e.animate({marginTop:0},c.speedOut)};$(this).hover(function(){imageHover=true;h||e.animate({marginTop:-e.height()},c.speedOver)},function(){imageHover=false;window.setTimeout(j,c.hideDelay)});$("div",a).hover(function(){h=
true},function(){h=false;window.setTimeout(j,c.hideDelay)})});if(this.complete||this.naturalWidth>0)$(g).trigger("load")})}});